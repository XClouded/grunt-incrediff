function FastClick(a){"use strict";var b,c=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=a,!a||!a.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(c,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(c,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(c,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(c,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(c,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(c,arguments)},FastClick.notNeeded(a)||(this.deviceIsAndroid&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;"click"===b?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;"click"===b?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),"function"==typeof a.onclick&&(b=a.onclick,a.addEventListener("click",function(a){b(a)},!1),a.onclick=null))}function Swipe(a,b){"use strict";function c(){p=t.children,s=p.length,p.length<2&&(b.continuous=!1),o.transitions&&b.continuous&&p.length<3&&(t.appendChild(p[0].cloneNode(!0)),t.appendChild(t.children[1].cloneNode(!0)),p=t.children),q=new Array(p.length),r=a.getBoundingClientRect().width||a.offsetWidth,t.style.width=p.length*r+"px";for(var c=p.length;c--;){var d=p[c];d.style.width=r+"px",d.setAttribute("data-index",c),o.transitions&&(d.style.left=c*-r+"px",h(c,u>c?-r:c>u?r:0,0))}b.continuous&&o.transitions&&(h(f(u-1),-r,0),h(f(u+1),r,0)),o.transitions||(t.style.left=u*-r+"px"),a.style.visibility="visible"}function d(){b.continuous?g(u-1):u&&g(u-1)}function e(){b.continuous?g(u+1):u<p.length-1&&g(u+1)}function f(a){return(p.length+a%p.length)%p.length}function g(a,c){if(u!=a){if(o.transitions){var d=Math.abs(u-a)/(u-a);if(b.continuous){var e=d;d=-q[f(a)]/r,d!==e&&(a=-d*p.length+a)}for(var g=Math.abs(u-a)-1;g--;)h(f((a>u?a:u)-g-1),r*d,0);a=f(a),h(u,r*d,c||v),h(a,0,c||v),b.continuous&&h(f(a-d),-(r*d),0)}else a=f(a),j(u*-r,a*-r,c||v);u=a,n(b.callback&&b.callback(u,p[u]))}}function h(a,b,c){i(a,b,c),q[a]=b}function i(a,b,c){var d=p[a],e=d&&d.style;e&&(e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=c+"ms",e.webkitTransform="translate("+b+"px,0)translateZ(0)",e.msTransform=e.MozTransform=e.OTransform="translateX("+b+"px)")}function j(a,c,d){if(!d)return void(t.style.left=c+"px");var e=+new Date,f=setInterval(function(){var g=+new Date-e;return g>d?(t.style.left=c+"px",y&&k(),b.transitionEnd&&b.transitionEnd.call(event,u,p[u]),void clearInterval(f)):void(t.style.left=(c-a)*(Math.floor(g/d*100)/100)+a+"px")},4)}function k(){w=setTimeout(e,y)}function l(){y=b.auto>0?b.auto:0,clearTimeout(w)}var m=function(){},n=function(a){setTimeout(a||m,0)},o={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(a){var b=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var c in b)if(void 0!==a.style[b[c]])return!0;return!1}(document.createElement("swipe"))};if(a){var p,q,r,s,t=a.children[0];b=b||{};var u=parseInt(b.startSlide,10)||0,v=b.speed||300;b.continuous=void 0!==b.continuous?b.continuous:!0;var w,x,y=b.auto||0,z={},A={},B={handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":n(this.end(a));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":n(this.transitionEnd(a));break;case"resize":n(c)}b.stopPropagation&&a.stopPropagation()},start:function(a){var b=a.touches[0];z={x:b.pageX,y:b.pageY,time:+new Date},x=void 0,A={},t.addEventListener("touchmove",this,!1),t.addEventListener("touchend",this,!1)},move:function(a){if(!(a.touches.length>1||a.scale&&1!==a.scale)){b.disableScroll&&a.preventDefault();var c=a.touches[0];A={x:c.pageX-z.x,y:c.pageY-z.y},"undefined"==typeof x&&(x=!!(x||Math.abs(A.x)<Math.abs(A.y))),x||(a.preventDefault(),l(),b.continuous?(i(f(u-1),A.x+q[f(u-1)],0),i(u,A.x+q[u],0),i(f(u+1),A.x+q[f(u+1)],0)):(A.x=A.x/(!u&&A.x>0||u==p.length-1&&A.x<0?Math.abs(A.x)/r+1:1),i(u-1,A.x+q[u-1],0),i(u,A.x+q[u],0),i(u+1,A.x+q[u+1],0)))}},end:function(){var a=+new Date-z.time,c=Number(a)<250&&Math.abs(A.x)>20||Math.abs(A.x)>r/2,d=!u&&A.x>0||u==p.length-1&&A.x<0;b.continuous&&(d=!1);var e=A.x<0;x||(c&&!d?(e?(b.continuous?(h(f(u-1),-r,0),h(f(u+2),r,0)):h(u-1,-r,0),h(u,q[u]-r,v),h(f(u+1),q[f(u+1)]-r,v),u=f(u+1)):(b.continuous?(h(f(u+1),r,0),h(f(u-2),-r,0)):h(u+1,r,0),h(u,q[u]+r,v),h(f(u-1),q[f(u-1)]+r,v),u=f(u-1)),b.callback&&b.callback(u,p[u])):b.continuous?(h(f(u-1),-r,v),h(u,0,v),h(f(u+1),r,v)):(h(u-1,-r,v),h(u,0,v),h(u+1,r,v))),t.removeEventListener("touchmove",B,!1),t.removeEventListener("touchend",B,!1)},transitionEnd:function(a){parseInt(a.target.getAttribute("data-index"),10)==u&&(y&&k(),b.transitionEnd&&b.transitionEnd.call(a,u,p[u]))}};return c(),y&&k(),o.addEventListener?(o.touch&&t.addEventListener("touchstart",B,!1),o.transitions&&(t.addEventListener("webkitTransitionEnd",B,!1),t.addEventListener("msTransitionEnd",B,!1),t.addEventListener("oTransitionEnd",B,!1),t.addEventListener("otransitionend",B,!1),t.addEventListener("transitionend",B,!1)),window.addEventListener("resize",B,!1)):window.onresize=function(){c()},{setup:function(){c()},slide:function(a,b){l(),g(a,b)},prev:function(){l(),d()},next:function(){l(),e()},stop:function(){l()},getPos:function(){return u},getNumSlides:function(){return s},kill:function(){l(),t.style.width="",t.style.left="";for(var a=p.length;a--;){var b=p[a];b.style.width="",b.style.left="",o.transitions&&i(a,0,0)}o.addEventListener?(t.removeEventListener("touchstart",B,!1),t.removeEventListener("webkitTransitionEnd",B,!1),t.removeEventListener("msTransitionEnd",B,!1),t.removeEventListener("oTransitionEnd",B,!1),t.removeEventListener("otransitionend",B,!1),t.removeEventListener("transitionend",B,!1),window.removeEventListener("resize",B,!1)):window.onresize=null}}}}"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(a,b){"use strict";var c=a.History=a.History||{},d=a.Zepto;if("undefined"!=typeof c.Adapter)throw new Error("History.js Adapter has already been loaded...");c.Adapter={bind:function(a,b,c){new d(a).bind(b,c)},trigger:function(a,b){new d(a).trigger(b)},extractEventData:function(a,c){var d=c&&c[a]||b;return d},onDomLoad:function(a){new d(a)}},"undefined"!=typeof c.init&&c.init()}(window),function(a){"use strict";var b=a.document,c=a.setTimeout||c,d=a.clearTimeout||d,e=a.setInterval||e,f=a.History=a.History||{};if("undefined"!=typeof f.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");f.initHtml4=function(){return"undefined"!=typeof f.initHtml4.initialized?!1:(f.initHtml4.initialized=!0,f.enabled=!0,f.savedHashes=[],f.isLastHash=function(a){var b,c=f.getHashByIndex();return b=a===c},f.isHashEqual=function(a,b){return a=encodeURIComponent(a).replace(/%25/g,"%"),b=encodeURIComponent(b).replace(/%25/g,"%"),a===b},f.saveHash=function(a){return f.isLastHash(a)?!1:(f.savedHashes.push(a),!0)},f.getHashByIndex=function(a){var b=null;return b="undefined"==typeof a?f.savedHashes[f.savedHashes.length-1]:0>a?f.savedHashes[f.savedHashes.length+a]:f.savedHashes[a]},f.discardedHashes={},f.discardedStates={},f.discardState=function(a,b,c){var d,e=f.getHashByState(a);return d={discardedState:a,backState:c,forwardState:b},f.discardedStates[e]=d,!0},f.discardHash=function(a,b,c){var d={discardedHash:a,backState:c,forwardState:b};return f.discardedHashes[a]=d,!0},f.discardedState=function(a){var b,c=f.getHashByState(a);return b=f.discardedStates[c]||!1},f.discardedHash=function(a){var b=f.discardedHashes[a]||!1;return b},f.recycleState=function(a){var b=f.getHashByState(a);return f.discardedState(a)&&delete f.discardedStates[b],!0},f.emulated.hashChange&&(f.hashChangeInit=function(){f.checkerFunction=null;var c,d,g,h,i="",j=Boolean(f.getHash());return f.isInternetExplorer()?(c="historyjs-iframe",d=b.createElement("iframe"),d.setAttribute("id",c),d.setAttribute("src","#"),d.style.display="none",b.body.appendChild(d),d.contentWindow.document.open(),d.contentWindow.document.close(),g="",h=!1,f.checkerFunction=function(){if(h)return!1;h=!0;var b=f.getHash(),c=f.getHash(d.contentWindow.document);return b!==i?(i=b,c!==b&&(g=c=b,d.contentWindow.document.open(),d.contentWindow.document.close(),d.contentWindow.document.location.hash=f.escapeHash(b)),f.Adapter.trigger(a,"hashchange")):c!==g&&(g=c,j&&""===c?f.back():f.setHash(c,!1)),h=!1,!0}):f.checkerFunction=function(){var b=f.getHash()||"";return b!==i&&(i=b,f.Adapter.trigger(a,"hashchange")),!0},f.intervalList.push(e(f.checkerFunction,f.options.hashChangeInterval)),!0},f.Adapter.onDomLoad(f.hashChangeInit)),f.emulated.pushState&&(f.onHashChange=function(b){var c,d=b&&b.newURL||f.getLocationHref(),e=f.getHashByUrl(d),g=null,h=null;return f.isLastHash(e)?(f.busy(!1),!1):(f.doubleCheckComplete(),f.saveHash(e),e&&f.isTraditionalAnchor(e)?(f.Adapter.trigger(a,"anchorchange"),f.busy(!1),!1):(g=f.extractState(f.getFullUrl(e||f.getLocationHref()),!0),f.isLastSavedState(g)?(f.busy(!1),!1):(h=f.getHashByState(g),(c=f.discardedState(g))?(f.getHashByIndex(-2)===f.getHashByState(c.forwardState)?f.back(!1):f.forward(!1),!1):(f.pushState(g.data,g.title,encodeURI(g.url),!1),!0))))},f.Adapter.bind(a,"hashchange",f.onHashChange),f.pushState=function(b,c,d,e){if(d=encodeURI(d).replace(/%25/g,"%"),f.getHashByUrl(d))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(e!==!1&&f.busy())return f.pushQueue({scope:f,callback:f.pushState,args:arguments,queue:e}),!1;f.busy(!0);var g=f.createStateObject(b,c,d),h=f.getHashByState(g),i=f.getState(!1),j=f.getHashByState(i),k=f.getHash(),l=f.expectedStateId==g.id;return f.storeState(g),f.expectedStateId=g.id,f.recycleState(g),f.setTitle(g),h===j?(f.busy(!1),!1):(f.saveState(g),l||f.Adapter.trigger(a,"statechange"),f.isHashEqual(h,k)||f.isHashEqual(h,f.getShortUrl(f.getLocationHref()))||f.setHash(h,!1),f.busy(!1),!0)},f.replaceState=function(b,c,d,e){if(d=encodeURI(d).replace(/%25/g,"%"),f.getHashByUrl(d))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(e!==!1&&f.busy())return f.pushQueue({scope:f,callback:f.replaceState,args:arguments,queue:e}),!1;f.busy(!0);var g=f.createStateObject(b,c,d),h=f.getHashByState(g),i=f.getState(!1),j=f.getHashByState(i),k=f.getStateByIndex(-2);return f.discardState(i,g,k),h===j?(f.storeState(g),f.expectedStateId=g.id,f.recycleState(g),f.setTitle(g),f.saveState(g),f.Adapter.trigger(a,"statechange"),f.busy(!1)):f.pushState(g.data,g.title,g.url,!1),!0}),void(f.emulated.pushState&&f.getHash()&&!f.emulated.hashChange&&f.Adapter.onDomLoad(function(){f.Adapter.trigger(a,"hashchange")})))},"undefined"!=typeof f.init&&f.init()}(window),function(a,b){"use strict";var c=a.console||b,d=a.document,e=a.navigator,f=a.sessionStorage||!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;try{f.setItem("TEST","1"),f.removeItem("TEST")}catch(o){f=!1}if(k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode,"undefined"!=typeof m.init)throw new Error("History.js Core has already been loaded...");m.init=function(){return"undefined"==typeof m.Adapter?!1:("undefined"!=typeof m.initCore&&m.initCore(),"undefined"!=typeof m.initHtml4&&m.initHtml4(),!0)},m.initCore=function(){if("undefined"!=typeof m.initCore.initialized)return!1;if(m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.disableSuid=m.options.disableSuid||!1,m.options.storeInterval=m.options.storeInterval||1e3,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.options.html4Mode=m.options.html4Mode||!1,m.options.delayInit=m.options.delayInit||!1,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;if("undefined"!=typeof b&&null!==b){for(a=0;a<b.length;a++)j(b[a]);m.intervalList=null}},m.debug=function(){m.options.debug&&m.log.apply(m,arguments)},m.log=function(){var a,b,e,f,g,h=!("undefined"==typeof c||"undefined"==typeof c.log||"undefined"==typeof c.log.apply),i=d.getElementById("log");for(h?(f=Array.prototype.slice.call(arguments),a=f.shift(),"undefined"!=typeof c.debug?c.debug.apply(c,[a,f]):c.log.apply(c,[a,f])):a="\n"+arguments[0]+"\n",b=1,e=arguments.length;e>b;++b){if(g=arguments[b],"object"==typeof g&&"undefined"!=typeof k)try{g=k.stringify(g)}catch(j){}a+="\n"+g+"\n"}return i?(i.value+=a+"\n-----\n",i.scrollTop=i.scrollHeight-i.clientHeight):h||l(a),!0},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached="undefined"!=typeof m.getInternetExplorerMajorVersion.cached?m.getInternetExplorerMajorVersion.cached:function(){for(var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");(b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c[0];);return a>4?a:!1}();return a},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached="undefined"!=typeof m.isInternetExplorer.cached?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());return a},m.emulated=m.options.html4Mode?{pushState:!0,hashChange:!0}:{pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent))),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<7)},m.isEmptyObject=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);return d.location.port&&(a+=":"+d.location.port),a+="/"},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return 1===a.length&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},m.getBaseUrl=function(){var a=m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a},m.getPageUrl=function(){var a,b=m.getState(!1,!1),c=(b||{}).url||m.getLocationHref();return a=c.replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?a:a+"/"})},m.getBasePageUrl=function(){var a=m.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b="undefined"==typeof b?!0:b,/[a-z]+\:\/\//.test(a)||(c="/"===d?m.getRootUrl()+a.replace(/^\/+/,""):"#"===d?m.getPageUrl().replace(/#.*/,"")+a:"?"===d?m.getPageUrl().replace(/[\?#].*/,"")+a:b?m.getBaseUrl()+a.replace(/^(\.\/)+/,""):m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},m.getLocationHref=function(a){return a=a||d,a.URL===a.location.href?a.location.href:a.location.href===decodeURIComponent(a.URL)?a.URL:a.location.hash&&decodeURIComponent(a.location.href.replace(/^[^#]+/,""))===a.location.hash?a.location.href:-1==a.URL.indexOf("#")&&-1!=a.location.href.indexOf("#")?a.location.href:a.URL||a.location.href},m.store={},m.idToState=m.idToState||{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{}},m.getState=function(a,b){"undefined"==typeof a&&(a=!0),"undefined"==typeof b&&(b=!0);var c=m.getLastSavedState();return!c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c},m.getIdByState=function(a){var b,c=m.extractId(a.url);if(!c)if(b=m.getStateString(a),"undefined"!=typeof m.stateToId[b])c=m.stateToId[b];else if("undefined"!=typeof m.store.stateToId[b])c=m.store.stateToId[b];else{for(;;)if(c=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof m.idToState[c]&&"undefined"==typeof m.store.idToState[c])break;m.stateToId[b]=c,m.idToState[c]=a}return c},m.normalizeState=function(a){var b,c;return a&&"object"==typeof a||(a={}),"undefined"!=typeof a.normalized?a:(a.data&&"object"==typeof a.data||(a.data={}),b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(a.url?a.url:m.getLocationHref()),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data),(b.title||c)&&m.options.disableSuid!==!0&&(b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id),b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b)},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d)},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c)},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),c=b.hash},m.extractId=function(a){var b,c,d,e;return e=-1!=a.indexOf("#")?a.split("#")[0]:a,c=/(.*)\&_suid=([0-9]+)$/.exec(e),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},m.extractState=function(a,b){var c,d,e=null;return b=b||!1,c=m.extractId(a),c&&(e=m.getStateById(c)),e||(d=m.getFullUrl(a),c=m.getIdByUrl(d)||!1,c&&(e=m.getStateById(c)),e||!b||m.isTraditionalAnchor(a)||(e=m.createStateObject(null,null,d))),e},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||b;return c},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b},m.hasUrlDuplicate=function(a){var b,c=!1;return b=m.extractState(a.url),c=b&&b.id!==a.id},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a},m.isLastSavedState=function(a){var b,c,d,e=!1;return m.savedStates.length&&(b=a.id,c=m.getLastSavedState(),d=c.id,e=b===d),e},m.saveState=function(a){return m.isLastSavedState(a)?!1:(m.savedStates.push(m.cloneObject(a)),!0)},m.getStateByIndex=function(a){var b=null;return b="undefined"==typeof a?m.savedStates[m.savedStates.length-1]:0>a?m.savedStates[m.savedStates.length+a]:m.savedStates[a]},m.getCurrentIndex=function(){var a=null;return a=m.savedStates.length<1?0:m.savedStates.length-1},m.getHash=function(a){var b,c=m.getLocationHref(a);return b=m.getHashByUrl(c)},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=decodeURIComponent(b)},m.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},m.setHash=function(a,b){var c,e;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(m.busy(!0),c=m.extractState(a,!0),c&&!m.emulated.pushState?m.pushState(c.data,c.title,c.url,!1):m.getHash()!==a&&(m.bugs.setHash?(e=m.getPageUrl(),m.pushState(null,null,e+"#"+a,!1)):d.location.hash=a),m)},m.escapeHash=function(b){var c=m.normalizeHash(b);return c=a.encodeURIComponent(c),m.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b)},m.setTitle=function(a){var b,c=a.title;c||(b=m.getStateByIndex(0),b&&b.url===a.url&&(c=b.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=c.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return d.title=c,m},m.queues=[],m.busy=function(a){if("undefined"!=typeof a?m.busy.flag=a:"undefined"==typeof m.busy.flag&&(m.busy.flag=!1),!m.busy.flag){h(m.busy.timeout);var b=function(){var a,c,d;if(!m.busy.flag)for(a=m.queues.length-1;a>=0;--a)c=m.queues[a],0!==c.length&&(d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay))};m.busy.timeout=g(b,m.options.busyDelay)}return m.busy.flag},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||0]||[],m.queues[a.queue||0].push(a),m},m.queue=function(a,b){return"function"==typeof a&&(a={callback:a}),"undefined"!=typeof b&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m},m.doubleCheck=function(a){return m.stateChanged=!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0},m.options.doubleCheckInterval)),m},m.safariStatePoll=function(){var b,c=m.extractState(m.getLocationHref());if(!m.isLastSavedState(c))return b=c,b||(b=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1)}),n.go(-1),!0)},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1)}),n.go(1),!0)},m.go=function(a,b){var c;if(a>0)for(c=1;a>=c;++c)m.forward(b);else{if(!(0>a))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)m.back(b)}return m},m.emulated.pushState){var o=function(){};m.pushState=m.pushState||o,m.replaceState=m.replaceState||o}else m.onPopState=function(b,c){var d,e,f=!1,g=!1;return m.doubleCheckComplete(),(d=m.getHash())?(e=m.extractState(d||m.getLocationHref(),!0),e?m.replaceState(e.data,e.title,e.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(f=m.Adapter.extractEventData("state",b,c)||!1,g=f?m.getStateById(f):m.expectedStateId?m.getStateById(m.expectedStateId):m.extractState(m.getLocationHref()),g||(g=m.createStateObject(null,null,m.getLocationHref())),m.expectedStateId=!1,m.isLastSavedState(g)?(m.busy(!1),!1):(m.storeState(g),m.saveState(g),m.setTitle(g),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0))},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0};if(f){try{m.store=k.parse(f.getItem("History.store"))||{}}catch(p){m.store={}}m.normalizeStore()}else m.store={},m.normalizeStore();m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(m.getLocationHref(),!0))),f&&(m.onUnload=function(){var a,b,c;try{a=k.parse(f.getItem("History.store"))||{}}catch(d){a={}}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState)m.idToState.hasOwnProperty(b)&&(a.idToState[b]=m.idToState[b]);for(b in m.urlToId)m.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=m.urlToId[b]);for(b in m.stateToId)m.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=m.stateToId[b]);m.store=a,m.normalizeStore(),c=k.stringify(a);try{f.setItem("History.store",c)}catch(e){if(e.code!==DOMException.QUOTA_EXCEEDED_ERR)throw e;f.length&&(f.removeItem("History.store"),f.setItem("History.store",c))}},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,"unload",m.onUnload)),m.emulated.pushState||(m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval)),("Apple Computer, Inc."===e.vendor||"Mozilla"===(e.appCodeName||""))&&(m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})))},m.options&&m.options.delayInit||m.init()}(window),function(a){var b=navigator.userAgent,c=document.getElementsByTagName("head")[0],d=a.bridge,e={WindVane:{url:"http://a.tbcdn.cn/g/mtb/lib-windvane/1.2.4/windvane.js",api:{getLocation:function(b){a.WindVane.api.geolocation.get(function(a){var c=a.coords.latitude,d=a.coords.longitude;b({latitude:c,longitude:d})},b,{enableHighAcuracy:!0})},confirm:function(a,b){var c=confirm(a.message),d=c?{ok:!0}:{ok:!1};b&&b(d)},share:function(b){a.WindVane.api.base.showShareMenu(null,function(){},{image:b.image,url:b.url,title:b.title,text:b.content})},login:function(a,b){1!=a.f&&lib.login.isLogin()?b({success:!0}):lib.login.goLogin({hideType:"reload"})},pushWindow:function(a){window.location.href=a.url},alert:function(a){alert(a.title?a.title+"\n":""+a.message)}}},Alipay:{api:{getLocation:function(b){a.AlipayJSBridge.call("getLocation",function(a){b({latitude:a.latitude,longitude:a.longitude})})},getNetworkType:function(b){a.AlipayJSBridge.call("getNetworkType",function(a){b(a)})},share:function(b){var c=b;b={channels:[{name:"Weibo",param:{title:c.title,content:c.wb_content||c.content,imageUrl:c.wb_image,captureScreen:!1,url:c.url}},{name:"LaiwangContacts",param:{title:c.title,content:c.content,imageUrl:c.image,captureScreen:!0,url:c.url}},{name:"Weixin",param:{title:c.title,content:c.content,imageUrl:c.image,captureScreen:!0,url:c.url}},{name:"WeixinTimeLine",param:{title:c.title,content:c.content,imageUrl:c.image,captureScreen:!0,url:c.url}},{name:"SMS",param:{content:c.content}},{name:"CopyLink",param:{url:c.url}}]},a.AlipayJSBridge.call("share",b)},login:function(b,c){a.AlipayJSBridge.call("login",c)},scan:function(b,c){a.AlipayJSBridge.call("scan",b,c)},tradePay:function(b,c){a.AlipayJSBridge.call("tradePay",b,c)},pushWindow:function(b){var c={};b.showToolBar&&(c.showToolBar=b.showToolBar,c.closeButtonText=b.closeButtonText||"关闭"),c.showLoading=!1,c.showTitleBar=b.showTitleBar||!1,a.AlipayJSBridge.call("pushWindow",{url:b.url,param:c})},confirm:function(b,c){a.AlipayJSBridge.call("confirm",b,c)},alert:function(b,c){a.AlipayJSBridge.call("showAlert",b,c)},toast:function(b){a.AlipayJSBridge.call("toast",b)},showTitlebar:function(){a.AlipayJSBridge.call("showTitlebar")},hideTitlebar:function(b,c){a.AlipayJSBridge.call("hideTitlebar",b,c)},closeWebview:function(b,c){a.AlipayJSBridge.call("closeWebview",b,c)},showLoading:function(b,c){a.AlipayJSBridge.call("showLoading",b,c)},hideLoading:function(b,c){a.AlipayJSBridge.call("hideLoading",b,c)
},setOptionMenu:function(b,c){a.AlipayJSBridge.call("setOptionMenu",b,c)},hideOptionMenu:function(){a.AlipayJSBridge.call("hideOptionMenu")},showOptionMenu:function(){a.AlipayJSBridge.call("showOptionMenu")},setTitle:function(b){a.AlipayJSBridge.call("setTitle",b)}}},other:{url:"http://a.tbcdn.cn/g/mtb/lib-windvane/1.2.4/windvane.js",api:{login:function(a,b){1!=a.f&&lib.login.isLogin()?b({success:!0}):lib.login.goLogin({widget:!0,hideType:"reload"})},pushWindow:function(a){window.location.href=a.url},alert:function(a){alert(a.message)},confirm:function(a,b){var c=confirm(a.message),d=c?{ok:!0}:{ok:!1};b&&b(d)}}}},f={init:function(){var a=this,c={WindVane:"WindVane",Alipay:"AlipayClient"},d="other";for(var e in c){var f=new RegExp(c[e]);b.match(f)&&(d=e)}a.setEntry(d),a.cfg&&a.getScript()},cfg:null,setEntry:function(a){var b=this;a=a||"other",b.entry=a,b.cfg=e[a]},sta:"",queue:[],entry:"",push:function(){var a=this,b=arguments;if(!a.sta&&"Alipay"==a.entry)try{window.AlipayJSBridge.call("getNetworkType",function(){a.sta="ready",a.exeHandlers()})}catch(c){}b.length&&(a.queue.push(b),"ready"==a.sta&&a.exeCommand(b))},supportFunc:function(a){var b,c=this,d=c.cfg;try{b=d.api||{}}catch(e){console.log(e)}return b&&b[a]?!0:!1},getScript:function(){var a=this,b=!1,d=a.cfg;if(d.url){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=d.url,e.onload=e.onreadystatechange=function(){b||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(b=!0,c&&e.parentNode&&c.removeChild(e),a.sta="ready",a.exeHandlers())},c.appendChild(e)}else"Alipay"==a.entry&&document.addEventListener("AlipayJSBridgeReady",function(){a.sta="ready",a.exeHandlers()},!1)},exeCommand:function(a){var b,c,d,e=this,f=e.cfg,g=f.api,h=a.length;if(g){h&&(b=a[0],2==h&&(d=a[1]),3==h&&(c=a[1])&&(d=a[2])),"login"!=b||c||(c={});try{e.supportFunc(b)?c?g[b].call(e,c,d):g[b].call(e,d):console.log("目前不支持"+b)}catch(i){console.log(i)}}},exeHandlers:function(){var a,b=this,c=b.queue;if("ready"==b.sta)for(;a=c.shift();)b.exeCommand(a)},isBridgeEnviroment:function(){return this.entry&&"other"!=this.entry?!0:!1}};d&&d.length&&(f.queue=d),a.bridge=f,a.bridge.init()}(window),function(a){function b(){}function c(a,b,c){var d=[];return null==a?d:s&&a.map===s?a.map(b,c):(each(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)}function d(a,b){if(dd.crumbs.length<=1)dd.crumbs=[a],dd.lib.localStorage.set("crumbs",[a]);else if(b){for(var c,d=new RegExp("^("+a+")($|/)"),e=0,f=dd.crumbs.length;f>e;e++)d.test(dd.crumbs[e])&&(c=e+1);if(c)for(var e=0,f=dd.crumbs.length-c;f>e;e++)dd.crumbs.pop(),dd.lib.localStorage.set("crumbs",dd.crumbs);else dd.crumbs=[a],dd.lib.localStorage.set("crumbs",dd.crumbs)}else dd.crumbs.pop(),dd.lib.localStorage.set("crumbs",dd.crumbs)}var e=a.document;a.dd=a.dd||{},dd.lib=dd.lib||{},dd.ui=dd.ui||{},dd.app=dd.app||{},dd.config={},dd.common=dd.common||{},dd.mtop_platform=9,dd.event={},dd.device={},dd.navi={forward:!1,back:!1,hand:!1,alias:{shop_details:"store"}};var f=a.bridge;MH5.webp.detectAndSetCookie();var g=navigator.userAgent,h=navigator.platform;!function(b){var c=screen.width,d=screen.height,e=a.devicePixelRatio||1;c*=e,d*=e,b.rl=c+"x"+d,/Android/.test(g)?(b.isAndroid=!0,/UCBrowser/.test(g)&&(b.isUc=!0),/SCH-I959/.test(g)&&(b.isGalaxyS4=!0),/m040/gi.test(g)&&(b.notSuppprtFixed=!0)):/iPhone|iPod|iPad/.test(h)&&(b.isIos=!0);var i=g.match(/iPhone\s+OS\s+([\d_]+)/),j=g.match(/Android\s+([\d.]+)/),k=i&&i[1].split("_"),l=j&&j[1].split("."),m=i&&k.splice(1,3);b.version={ios:i&&parseFloat(k+"."+m.join(""),10),android:j&&parseFloat(l.splice(0,1)+"."+l.join(""))},b.isAndroid||b.version.ios&&b.version.ios>5.11&&(b.iosStyle=!0),b.needtouch=b.isGalaxyS4?!0:!1;var n=!1;b.isAndroid||b.isIos||(n=!0),b.isIos&&b.version.ios>5&&(n=!0),b.isAndroid&&b.version.android>4&&(n=!0),b.nativeScroll=n,f.push("getNetworkType",function(a){dd.device.nw=a.networkType})}(dd.device),dd._monitor_id=+new Date,dd.sendImage=function(a,b){var c,d="//gm.mmstat.com/tddhv.1.1.1",e=[];for(var f in a)a.hasOwnProperty(f)&&e.push(f+"="+a[f]);var g=document.createElement("img");e.length&&(b&&e.push("pid="+b),dd._monitor_id&&e.push("tid="+dd._monitor_id),c=d+"?"+e.join("&")),c&&(g.src=c.toLowerCase(),g.onload=g.onerror=function(){g.parentNode.removeChild(g)},document.body.appendChild(g))},function(a,b){var c=a.bridge;"Alipay"!=c.entry?($("body").addClass("web-page"),b._env="webPage"):c.push("showTitlebar"),c.supportFunc("setTitle")&&($("#J_page").addClass("hide_title_bar"),b._hideTitleBar=!0),document.addEventListener("optionMenu",function(){var a,c=History.getState().url,d=c&&b.lib.getUriParam(c,"ddid");d=d||"index",(a=b._menuHandler[d])&&a.context[a.handler]()},!1)}(a,dd),dd.event={click:"click",touchmoveHandler:function(){},stoptouchmoveHandler:function(a){a.preventDefault()}},dd.ui.appinterval=300,dd.ui.tpl={load:'<div class="core_loading"><i></i><span>努力加载中...</span></div>',error:'<div class="no_content J_retry"><i></i><%=msg%> 点击重试</div>',none:'<div class="no_content"><i></i><%=msg%></div>',geo:'<div class="core_loading"><i></i><span>正在定位...</span></div>'};var i,j=$("#J_toast"),k=$("#J_toast_loading"),l=f.supportFunc("toast"),m=f.supportFunc("showLoading"),n=$("#J_toast_tips");dd.ui.toast=function(a,b){k.hide(),l&&j.hide()&&f.push("hideLoading");var c,d=function(a,b){l?f.push("toast",{content:a,type:b||"none",duration:3e3}):n.html("<span>"+a+"</span>").show()};if(a){if("string"==typeof a?(d(a),c=a):a.ret?(c=a.ret[0].split("::")[1],/SESSION/.test(c)?(c="网络问题，请登录",f.supportFunc("login")?f.push("login",{f:1},function(){}):d("网络问题","请登录")):d(c,"fail")):(c="网络问题，请重试",d(c,"fail")),b&&b.wrap&&b.wrap.find(".core_loading").length)return c=c||"网络问题",b.wrap.find(".core_loading").replaceWith(dd.ui.tmpl(dd.ui.tpl.error,{msg:c})),void b.wrap.find(".J_retry").on("click",function(){b&&b.initHandler&&b.initHandler.call(b)});if(b&&b._scroll){var e=(b._scroll.scrollEl,b.wrap.find(".J_pullUp"));e.length&&(e.addClass("dn"),e.removeClass("async"),setTimeout(function(){e.removeClass("dn")},1e3))}!l&&j.show(),i&&clearTimeout(i),i=setTimeout(function(){m?f.push("hideLoading"):j.hide()},3e3)}},dd.ui.toast.loading=function(){m?f.push("showLoading"):(n.hide(),j.show(),k.show())},dd.ui.toast.hide=function(){m?f.push("hideLoading"):j.hide()},dd.ui._scroll=function(b){function c(){var a=this;if(!a.load_disable&&!u.hasClass("dn")&&!u.hasClass("async")){var b=dd.device.iosStyle?l[0].scrollTop:e.body.scrollTop;b>t&&t>0&&(u.addClass("async"),k())}}function d(){var b=l.find(".J_lazy");b.length&&b.lazyload({container:dd.device.iosStyle?l:a})}function f(){return dd.device.iosStyle?m[0].clientHeight:$(a).height()}function g(){return dd.device.iosStyle?l[0].scrollHeight:e.body.scrollHeight}function h(){return r-q-s}var i=this,j=b.wrap,k=b.pullUpAction,l=$(j),m=l.parents(".sp_pages"),n=m[0]&&m[0].id,o="scroll."+n,p=dd.device.iosStyle?l:$(a),q=f(),r=g(),s=100,t=h(),u=l.find(".J_pullUp");return k&&p.off(o).on(o,function(){c()}),d(),{scrollEl:p,refresh:function(){u&&(u.hasClass("async")&&u.removeClass("async"),q=f(),r=g(),t=h(),d())},disable:function(){i.load_disable=!0,e.addEventListener("touchmove",dd.event.stoptouchmoveHandler,!1),p.off(o)},enable:function(){i.load_disable=!1,e.removeEventListener("touchmove",dd.event.stoptouchmoveHandler,!1),k&&p.off(o).on(o,function(){c()})}}};var o='<div class="J_dialog_wrap" style="position: fixed;left: 0;bottom: 0;width: 100%;height:100%;z-index:99;"><div class="pop_mask J_wrap_mask" style=""></div><div class="dialog_pop J_wrap_dialog <%=cls%>" id=""><div class=""><div class="dialog_close_wrap J_dialog_close"><i class="pop_close_icon"></i></div><div class="pop_wrap" id=""><div class=""><h2><%=title%></h2><div class="J_scroll pop_scroll_wrap" style="<%if(iheight){%>height:<%=maxheight%>px;<%}else{%><%if(maxheight){%>max-height:<%=maxheight%>px<%}else{%>height:<%=height%>px<%}}%>"><div class="dialog_content J_dialog_content"><%=content%></div></div><%if(bottom){%><div class="pop_bottom"><%=bottom%></div><%}%></div></div></div></div></div>';dd.ui.dialog=function(a){var b=a.wrap,c=a.cls||"",d=(a.type||"html",a.title||""),e=a.content||"",f=a.bottom||"",g=a.maxheight||"150",h=a.height||"150",i=a.callback,j=$(b),k=dd.ui.tmpl(o,{cls:c,title:d,content:e,bottom:f,height:h,maxheight:g,iheight:dd.device.isAndroid&&dd.device.version.android<4?!0:!1});return j.find(".J_wrap_mask").length&&j.find(".J_dialog_wrap").remove(),j.append(k),j.find(".J_dialog_close, .J_wrap_mask").on("click",function(){j.find(".J_dialog_wrap").remove()}),i&&i(),{setTitle:function(a){j.find(".J_dialog_wrap h2").html(a)},hide:function(){j.find(".J_dialog_wrap").remove()},wrap:j.find(".J_dialog_wrap")}},b.prototype={init:function(){}},dd.ui.select=b;var p=$("#J_alipay"),q=$("#J_tpl_alipay");dd.ui.alipay=function(b){var c={title:b.title||"支付",optionMenu:b.optionMenu||"支付完成",alipayUrl:b.alipayUrl,isAlipay:"Alipay"==f.entry?"true":"false"},d=dd.ui.tmpl(q.html(),c);p.show().html(d),$("#J_page").hide(),p.find("iframe").on("load",function(){p.find(".core_loading").hide()}),a.scrollTo(0,0),p.find("#J_alipay_back").on("click",function(){$("#J_page").show(),b.backFunc&&b.backFunc(),p.hide().empty()}),p.find("#J_pay_success").on("click",function(){$("#J_page").show(),b.successFunc&&b.successFunc(),p.hide().empty()})};var r=Array.prototype,s=r.map;dd.lib.extractHashParams=function(a,b){var d=a.exec(b).slice(1);return c(d,function(a){return a?decodeURIComponent(a):null})},dd.lib.getUriParam=function(a,b){var c=a.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/",d=a.replace(c,""),e=new RegExp("(^|&?)"+b+"=([^&|#]*)(&|#|$)"),f=d.substr(1).match(e);return null!=f?decodeURIComponent(f[2]):null},dd.lib.num2Fixed=function(a,b){var b=b||3;return String(a).indexOf(".")>0?parseFloat(a.toFixed(b)):a},dd.lib.geoDistance=function(a,b){var c=parseFloat(b.longitude),d=parseFloat(b.latitude),e=parseFloat(a.longitude)||0,f=parseFloat(a.latitude)||0;return 0==c||0==d||0==e||0==f?0:1e5*Math.sqrt((c-e)*(c-e)+(d-f)*(d-f))},dd.lib.localStorageDetect=function(){try{if("undefined"==a.localStorage)return!1;var b="testSupportKey";a.localStorage.setItem(b,"1");var c=a.localStorage.getItem(b);return a.localStorage.removeItem(b),"1"==c}catch(d){}return!1},dd.lib.isSuppLocalStorage=dd.lib.localStorageDetect();var t={};dd.lib.memCache={set:function(a,b){t["dd_"+a]=b},get:function(a){return t["dd_"+a]},removeValue:function(a){delete t["dd_"+a]}},dd.lib.localStorage={set:function(a,b){dd.lib.isSuppLocalStorage?localStorage.setItem("dd_"+a,JSON.stringify(b)):dd.lib.memCache.set(a,b)},get:function(b){if(dd.lib.isSuppLocalStorage){var c=a.localStorage["dd_"+b];return c&&"undefined"!=c?JSON.parse(c):null}return dd.lib.memCache.get(b)},removeValue:function(a){dd.lib.isSuppLocalStorage?localStorage.removeItem("dd_"+a):dd.lib.memCache.removeValue(a)}},dd.lib.cache_t=a.dd_cache_t||"1404012343";var u=dd.lib.localStorage.get("cache_t");u&&u===dd.lib.cache_t||(dd.lib.localStorage.removeValue("inorder_data"),dd.lib.localStorage.set("cache_t",dd.lib.cache_t)),dd.crumbs=dd.lib.localStorage.get("crumbs")||[],dd.lib.ddState=function(a){var b=a.push,c=a.back,e=a.replace;if(dd.navi.hand=!0,b)dd.navi.forward=!0,History.replaceState(b.obj,"淘点点","?_ddid="+b.ddid+dd.config.url_track);else if(c){d(c.ddid,c.multi);var f=dd.crumbs[dd.crumbs.length-1];dd.navi.alias[f]&&(f=dd.navi.alias[f]),dd.navi.back=!0,History.replaceState(c.obj,"淘点点","?_ddid="+f+dd.config.url_track)}else e&&(dd.navi.forward=!0,History.replaceState(e.obj,"淘点点","?_ddid="+e.ddid+dd.config.url_track),dd.crumbs=[e.ddid],dd.lib.localStorage.set("crumbs",[e.ddid]))},function(a,b){var c,d;c=g.match(/Alipay/i)?"alipay":g.match(/tbmenu/i)?"dd":g.match(/taobao/i)?"tb":b.isAndroid||b.isIos?"wap":"pc";var e=dd.lib.getUriParam(location.search,"ttid");$.ajax({url:"http://market.m.taobao.com/market/diandian/platform-config.php",dataType:"jsonp",success:function(a){var b=a.dd_app_ttid,f=a.dd_banner_cfg,g=a.dd_plat_cfg;try{if(e&&(d=b))for(var h in d)d[h]==e&&(c=h);c&&(c=c.toLowerCase(),g&&(dd.mtop_platform=isNaN(g[c])?"":g[c]),f&&(dd.mtop_banner_request=f[c]||f.wap),$(document).trigger("cfgReady"))}catch(i){console.log(i)}}})}(a,dd.device),dd.lib.preventAllClick=function(a){return a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),!1},dd.lib.imgSuffix=function(){return"true"==MH5.cookie.getCookie("supportWebp")?"_.webp":""}(),dd.lib.deviceUri=function(a){$("#J_deviceuri_iframe")&&$("#J_deviceuri_iframe").remove(),$("body").append('<iframe src="'+a+'" id="J_deviceuri_iframe"></iframe>')},function(){dd.lib.translateNativeSchema2Ddid=function(a){var b=a.replace(/^taobaocoupon:\/\//,""),c=b.split("?"),d=c[0],e={};if(c[1]){var f=c[1].split("&");$.each(f,function(a,b){var c=b.split("=");e[c[0]]=c[1]})}var g;switch(console.log(e),d){case"index":g="index";break;case"dd":g="dian";break;case"waimai":g="delivery";break;case"me":g="my";break;case"dd":g="dian";break;case"myreserve":g="my_reserve";break;case"reserve":g="reserve_shops";break;case"reservedetail":g="reserve_datelist/"+e.shopid;break;case"storecoupondetail":g="evoucher/"+e.id+"/"+(e.storeid||"");break;case"mycoupondetail":g="my_evoucher_details/"+e.id;break;case"menu":g=e.takeoutid?"carte/delivery/"+e.takeoutid:"carte/dian/"+e.id;break;case"store":g="store/"+e.id;break;default:g="index"}return g}}(),function(){dd.lib.go_back=function(b){for(var c,d=a.History,e=d.getCurrentIndex(),f=!1,g=d.savedStates,h=["delivery"],i=arguments[0],j=e;j>=0;j--){var k=g[j],l=k.data,m=l.page&&l.page.replace(/^\s*|\s$/,"");if(m&&!f)if(i&&i==m)c=j,f=!0;else for(var n=0;n<h.length;n++)m==h[n]&&(c=j,f=!0)}if(isNaN(c))b&&b();else{var o=g[c],p=o.data.page;$("#J_page").find(".sp_pages").each(function(a,b){$(b).attr("data-ddid")==p&&$(b).removeAttr("data-ddid")});for(var q=[],j=0;j<g.length;j++)c>j&&q.push(g[j]);d.savedStates=q,d.pushState(o.data,"淘点点","?_ddid="+p)}}}(),function(a){function b(){var a=arguments[0];a&&(k.latitude=a.latitude,k.longitude=a.longitude),j&&clearTimeout(j),g()}function c(){navigator.geolocation?(navigator.geolocation.getCurrentPosition(e,d,{enableHighAcuracy:!0,timeout:4e3,maximumAge:9e5}),i=setTimeout(function(){f()},4500)):f("无法定位")}function d(a){switch(a.code){case a.TIMEOUT:break;case a.POSITION_UNAVAILABLE:f("无法获取定位信息");break;case a.PERMISSION_DENIED:f('请在手机"设置"中开启定位服务');break;case a.UNKNOWN_ERROR:f("未知错误");break;default:f("无法定位")}}function e(a){i&&clearTimeout(i);var b=a.coords;k.latitude=b.latitude,k.longitude=b.longitude,g()}function f(a){i&&clearTimeout(i),dd.ui.toast(a),g()}function g(){h()}function h(){lib.mtop.request({api:"mtop.life.diandian.getCityList",v:"2.0",data:{x:k.longitude,y:k.latitude},extParam:{}},function(a){var b=a.data;dd.lib.memCache.set("city_list",b.cityList),dd.lib.localStorage.get("current_city")||dd.lib.localStorage.set("current_city",b.location),b.location&&dd.lib.memCache.set("geo_location",b.location),$(document).trigger("setOnH5Geo",a)},function(a){dd.ui.toast(a),$(document).trigger("setOnH5Geo",a)})}var i,j,k={};a.bridge=a.bridge||[];var l=a.bridge;dd.lib.getH5Geo=function(a){l.isBridgeEnviroment()?(l.push("getLocation",b),j=setTimeout(function(){c()},5e3)):c(),$(document).one("setOnH5Geo",function(b,c){a&&a.callback&&a.callback(k,c)})}}(a),function(a,b,c,d){var e=a(b);a.fn.lazyload=function(c){function f(){var b=0;h.each(function(){var c=a(this);if(!i.skip_invisible||"none"!==c.css("display"))if(a.abovethetop(this,i)||a.leftofbegin(this,i));else if(a.belowthefold(this,i)||a.rightoffold(this,i)){if(++b>i.failure_limit)return!1}else c.trigger("appear"),b=0})}var g,h=this,i={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return c&&(d!==c.failurelimit&&(c.failure_limit=c.failurelimit,delete c.failurelimit),d!==c.effectspeed&&(c.effect_speed=c.effectspeed,delete c.effectspeed),a.extend(i,c)),g=i.container===d||i.container===b?e:a(i.container),0===i.event.indexOf("scroll")&&g.on(i.event,function(){return f()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,c.one("appear",function(){if(!this.loaded){if(i.appear){var d=h.length;i.appear.call(b,d,i)}a("<img />").on("load",function(){c.hide().css("backgroundImage","url("+c.data(i.data_attribute)+")")[i.effect](i.effect_speed),b.loaded=!0;var d=a.grep(h,function(a){return!a.loaded});if(h=a(d),i.load){var e=h.length;i.load.call(b,e,i)}}).attr("src",c.data(i.data_attribute))}}),0!==i.event.indexOf("scroll")&&c.on(i.event,function(){b.loaded||c.trigger("appear")})}),e.on("resize",function(){f()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&e.on("pageshow",function(b){b=b.originalEvent||b,b.persisted&&h.each(function(){a(this).trigger("appear")})}),f(),this},a.belowthefold=function(c,f){var g;return g=f.container===d||f.container===b?e.height()+e[0].scrollY:a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return g=f.container===d||f.container===b?e.width()+e[0].scrollX:a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return g=f.container===d||f.container===b?e[0].scrollY:a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return g=f.container===d||f.container===b?e[0].scrollX:a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.fn,{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})}($,a,document),function(){var a={};dd.ui.tmpl=function b(c,d){var e=/\W/.test(c)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):a[c]=a[c]||b(document.getElementById(c).innerHTML);return d?e(d):e}}()}(window),function(a,b,c){var d=b.bridge,e=c.config;e.option_menu_icon={share:"http://g.dd.alicdn.com/tps/i3/TB1xbFoFFXXXXcqaXXXWA_BHXXX-48-48.png"},e.share={default_img:"http://g.dd.alicdn.com/tps/i1/TB1SsjQFpXXXXcRcXXXZ1Bf0VXX-640-600.png",jump:"http://m.tdd.la/mjump.html?_jump="},function(){e.url_track="Alipay"==d.self?"&ttid="+c.lib.getUriParam(location.href,"ttid"):""}(),e.index={banner_clientVersion:"3.1.0"},e.store={FRONT_PAY_SHOP_TYPE:"12",PAY_SHOP_TYPE_BASE:"5",PAY_SHOP_TYPE_HIGH:"3"},e.optioncart={diandefault:"0",dianmod:"1",dianadd:"2"};var f=e.carte={};f.resetInorderData=function(){return{carte:{},itg:{}}};var g=e.order={};g.service_type_base="0",g.service_type_advance="1",g.service_type_frontpay="2";var h=e.my_order={};h.order_is_record="3",h.order_not_record="2",h.type_high="1",h.type_base="5",h.ORDER_STATUS_WAIT_BUYER_CONFIRM="11",h.ORDER_STATUS_WAIT_BUYER_PAY="18",h.ORDER_STATUS_TRADE_SUCCESS="21",h.ORDER_STATUS_TRADE_FINISH="35";var i=e.waimai={};i.tip={},i.tip.waimai_tip_enable="1",i.tip.waimai_tip_distance="2000",function(){lib.mtop.request({api:"mtop.dd.client.switcher",v:"1.0",data:{versionid:"3.0.0@ios",ttid:"201200@tbmenu_iphone_3.0.0"},extParam:{}},function(b){var c=b.data;c&&a.each(b.data,function(a,b){i.tip[a]=b})},function(){})}(),i.speed={slow:"-1",soso:"0",fast:"1"},e.getScanFromTypeByServiceType=function(a){var b;switch(a=a.toString()){case c.config.order.service_type_base:b=4;break;case c.config.order.service_type_advance:b=2;break;case c.config.order.service_type_frontpay:b=4;break;default:b=0}return b}}(Zepto,window,window.dd),function(a,b,c){c.delivery={getTags:function(a){var b=a.id,c=a.callback;lib.mtop.request({api:"mtop.life.diandian.getTags",v:"1.0",data:{shopId:b}},function(a){c&&c(a.data)},function(){})}}}(Zepto,window,dd.common),function(a,b,c){var d=b.bridge,e=!1;c.myOrder={modify:function(b){if(!e){e=!0,dd.ui.toast.loading();var c=b.orderId,d=b.type;lib.mtop.request({api:"mtop.life.diandian.myOrderDetail",v:"1.0",data:{id:c}},function(b){var f=b.data;if(f){var g=dd.lib.localStorage.get("inorder_data")||{},h=f.storeInfo.storeId;g[h]||(g[h]=dd.config.carte.resetInorderData());var i=g[h].carte={};a.each(f.items,function(a,b){b.inOrder=parseInt(b.cnt),b.oriPrice=b.orgPrice,b.itemPrice=b.price,b.skuId?i[b.itemId+"_"+b.skuId]=b:i[b.itemId]=b}),dd.lib.localStorage.set("inorder_data",g),a("#J_carte").removeAttr("data-ddid");var j="edit"==d?"dianmod_"+c:"dian";dd.lib.ddState({push:{ddid:"carte/"+j+"/"+h,obj:{referer:"my_order"}}}),dd.ui.toast.hide()}e=!1},function(a){dd.ui.toast(a),e=!1})}},add:function(a){var b=dd.lib.localStorage.get("inorder_data");delete b[a.storeId],dd.lib.localStorage.set("inorder_data",b),dd.lib.ddState({push:{ddid:"carte/dianadd_"+a.orderId+"/"+a.storeId,obj:{referer:"my_order"}}})},confirmBase:function(a,b,c){var d=a.orderId;dd.ui.toast.loading(),lib.mtop.request({api:"mtop.life.diandian.menuConfirm",v:"1.0",data:{extraId:d}},function(a){var c=a.data;c.result&&b&&b(),dd.ui.toast.hide()},function(a){c&&c(),dd.ui.toast(a)})},confirmHigh:function(b,c,f){function g(){var a=dd.lib.memCache.get("geo_location");return a?a.longitude:0}function h(){var a=dd.lib.memCache.get("geo_location");return a?a.latitude:0}function i(a){dd.ui.toast.loading(),e=!0,lib.mtop.request({api:"mtop.life.diandian.simpleScanCode",v:"1.0",data:{from:a.from,codeUrl:a.codeUrl,ddOrderId:a.ddOrderId}},function(b){var c=b.data;"1"==c.needLogin&&(j(a),k(a))},function(a){dd.ui.toast(a),e=!1,f&&f()})}function j(b){lib.mtop.request({api:"mtop.life.diandian.ecodeScanCode",v:"1.0",data:{from:b.from,codeUrl:b.codeUrl,ddOrderId:b.ddOrderId,gpsX:b.gpsx,gpsY:b.gpsy}},function(d){function f(){dd.lib.memCache.set("confirmType",3),"my_order"==p?g():"my_order_details"==p&&o.initHandler()}function g(){var a={push:{ddid:"my_order_details/"+b.ddOrderId,obj:{referer:"my_order"}}};dd.lib.ddState(a)}function h(a){var b={push:{ddid:"my_reserve_details/"+a,obj:{referer:"my_order"}}};dd.lib.ddState(b)}var i=d.data;dd.ui.toast.hide();var j=i.data.code;if("diancai-verify"==i.type||"reserve"==i.type)if("2000"==j)if(i.data.soleOutItems){var k=[];a.each(i.data.soleOutItems,function(a,b){k.push(b.title)}),alert("下单成功，以下菜品已沽清\n"+k.join("，")),"reserve"==i.type?h(i.data.reserveOrderId):f(),a("#J_my_order").removeAttr("data-ddid")}else"reserve"==i.type?h(i.data.reserveOrderId):f(),a("#J_my_order").removeAttr("data-ddid");else"-2005"==j?(alert(i.data.message),dd.lib.ddState({push:{ddid:"carte/dian/"+b.storeId,obj:{referer:"my_order"}}}),dd.lib.ddState(l)):dd.ui.toast(i.data.message||"发生了一些错误，请稍后再试");else if("pay"==i.type)if("3000"==j){dd.lib.memCache.set("pay_detail",i.data.orderRespDTO);var l={push:{ddid:"pay_detail/"+b.storeId,obj:{referer:"my_order"}}};dd.lib.ddState(l)}else dd.ui.toast(i.data.message||"发生了一些错误，请稍后再试");else dd.ui.toast("仅限扫码下单");e=!1,c&&c()},function(a){dd.ui.toast(a),e=!1,f&&f()})}function k(a){lib.mtop.request({api:"mtop.life.diandian.checkScanCode",v:"1.0",data:{gpsx:a.gpsx,gpsy:a.gpsy,preGpsy:a.preGpsy,preGpsx:a.preGpsx,preTime:a.preTime,time:Date.now(),ddOrderId:a.ddOrderId}},function(){},function(){})}if(!e){e=!0,dd.ui.toast.loading();var l=b.orderId,m=b.storeId,n=b.time,o=b.view,p=b.ddid,q=b.fromType||0,r={preGpsx:g(),preGpsy:h()};dd.lib.getH5Geo({callback:function(a){dd.ui.toast.hide(),e=!1,d.push("scan",{type:"qr"},function(){var b=arguments[0],c={from:q,codeUrl:b.qrCode,ddOrderId:l,preTime:n,gpsx:a.longitude||0,gpsy:a.latitude||0,preGpsx:r.preGpsx,preGpsy:r.preGpsy,storeId:m};i(c)})}})}}}}(Zepto,window,dd.common),function(a,b,c){c.useEvoucher={evoucherUse:function(b,c){var d=this,e=[],f=[],g={};return a.each(b,function(a,b){var e=d._getDistance({longitude:b.longitude,latitude:b.latitude},c);f.push(e||a);var h;h=e>1e3?e/1e3>100?">100千米":dd.lib.num2Fixed(e/1e3,1)+"千米":0==e?"":parseInt(e)+"米";var i='<li class="J_pop_store_item" data-storeid="'+b.localstoreId+'"><div class="shop_name"><span>'+h+"</span>"+b.localstoreName+'</div><div class="shop_address">'+b.address+"</div></li>";g[e||a]=i}),f.sort(),a.each(f,function(a,b){e.push(g[b])}),e.join("")},_getDistance:function(a,b){var c=parseFloat(a.longitude),d=parseFloat(a.latitude),e=parseFloat(b.longitude)||0,f=parseFloat(b.latitude)||0;return 0==c||0==d||0==e||0==f?0:1e5*Math.sqrt((c-e)*(c-e)+(d-f)*(d-f))}}}(Zepto,window,dd.common),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===a.type||a.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(a.className)},FastClick.prototype.needsFocus=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},FastClick.prototype.sendClick=function(a,b){"use strict";var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},FastClick.prototype.determineEventType=function(a){"use strict";return this.deviceIsAndroid&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(a){"use strict";var b;this.deviceIsIOS&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},FastClick.prototype.updateScrollParent=function(a){"use strict";var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(a){"use strict";return a.nodeType===Node.TEXT_NODE?a.parentNode:a},FastClick.prototype.onTouchStart=function(a){"use strict";var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],this.deviceIsIOS){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!this.deviceIsIOS4){if(c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<200&&a.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(a){"use strict";var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},FastClick.prototype.onTouchMove=function(a){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(a){"use strict";return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(a){"use strict";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||g,g.fastClickScrollParent=this.targetElement.fastClickScrollParent),d=g.tagName.toLowerCase(),"label"===d){if(b=this.findControl(g)){if(this.focus(g),this.deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g))return a.timeStamp-c>100||this.deviceIsIOS&&window.top!==window&&"input"===d?(this.targetElement=null,!1):(this.focus(g),this.deviceIsIOS4&&"select"===d||(this.targetElement=null,a.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(e=g.fastClickScrollParent,e&&e.fastClickLastScrollTop!==e.scrollTop)?!0:(this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(a){"use strict";return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(a){"use strict";var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},FastClick.prototype.destroy=function(){"use strict";var a=this.layer;this.deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(a){"use strict";var b,c;if("undefined"==typeof window.ontouchstart)return!0;if(c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!FastClick.prototype.deviceIsAndroid)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(c>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===a.style.msTouchAction?!0:!1},FastClick.attach=function(a){"use strict";return new FastClick(a)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,function(a,b,c){function d(a){var b=new RegExp("(?:^|;\\s*)"+a+"\\=([^;]+)(?:;\\s*|$)").exec(i.cookie);return b?b[1]:c}function e(){return j.indexOf("AliApp")>0||j.match(/ttid\=[^@]+@[^_]+_[^_]+_[\d\.]+/)||l.match(/ttid\=[^@]+@[^_]+_[^_]+_[\d\.]+/)||j.indexOf("WindVane")>0}function f(a,b){var c="http://"+["login",m.config.subDomain,m.config.mainDomain].join(".")+"/"+m.config.name+"?tpl_redirect_url="+encodeURIComponent(a||location.href);if(e()){if(/Android/.test(j)&&h())return void g(c);location.href=c}else b?location.replace(c):location.href=c}function g(a){var b=i.createElement("a"),c=i.createEvent("HTMLEvents");b.style.display="none",b.href=a,i.body.appendChild(b),c.initEvent("click",!1,!0),b.dispatchEvent(c)
}function h(){return(""+j).indexOf("Android 2.3")>-1?!0:(""+j).indexOf("Android 4.4")>-1?!0:!1}var i=a.document,j=a.navigator.userAgent,k=location.hostname,l=a.location.search,m=b.login=b.login||{},n=/.*?([^.]+)(?:\.x)?\.(taobao|tmall|etao|alibaba|alipay|aliyun)\.(com|net).*/i,o=function(){var a=k.indexOf("x.taobao.net")>0?"waptest":"m",b=k.match(n);return!b||"waptest"!==b[1]&&"wapa"!==b[1]&&"m"!==b[1]||(a=b[1]),a}();m.config={name:"login.htm",mainDomain:"taobao.com",subDomain:o},m.isLogin=function(a){if(!a||!b.mtop){var d=this.getUserNick();return!!d}b.mtop.request({api:"mtop.user.getUserSimple",v:"1.0",data:{isSec:0}},function(d){d.retType===b.mtop.RESPONSE_TYPE.SUCCESS?a(!0,d):a(c)},function(d){a(d.retType===b.mtop.RESPONSE_TYPE.SESSION_EXPIRED?!1:c)})},m.getUserNick=function(){var a="",b=d("_w_tb_nick"),c=d("_nk_")||d("snk");return b&&b.length>0&&"null"!=b?a=decodeURIComponent(b):c&&c.length>0&&"null"!=c&&(a=unescape(unescape(c).replace(/\\u/g,"%u"))),a},m.goLogin=function(a){a=a||{},a.targetUrl=a.targetUrl||a.redirectUrl||a.rediUrl,!e()&&a.widget===!0&&this.widget?this.widget.showLogin(a):f(a.targetUrl,!e()&&a.replace)},m.getNickFromCookie=m.getUserNick}(window,window.lib||(window.lib={})),function(a,b){b.login=b.login||{};var c=!1,d=!1,e="",f="close",g="",h="#J_M_login{position:fixed;width:100%;height:100%;top:0;z-index:99999;background-color:#eee;display:none}#J_header{z-index:99999;background:-webkit-gradient(linear,0 0,0 100%,from(#f8f8f8),to(#e6e6e6));top:0;height:50px;width:100%;position:absolute;-webkit-box-shadow:0 1px 1px 0 #c4c4c4;display:-webkit-box}#J_header section:nth-child(2){text-align:center;-webkit-box-flex:1}#J_header section:nth-child(2) .title{padding-top:15px;text-overflow:ellipsis;height:32px;font-size:18px;font-weight:bold}#J_header .back{margin-top:10px;width:72px;height:30px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAAA8CAYAAACJmDMtAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDkvMjgvMTLDJIlRAAAGXUlEQVR4nO2db0xTZxTGn/u+belaUEwWK8XEjVBm3YwLOgyWLTNuWbbMqczEqcsgIybonERwmxJZNIvAiG7DYJYskT8mtBvihGRLXLJl2acRxQ+CE9QtEmMIhWIyQYTS3ncfbm+tjD9taZXS80tumjTQ9yb3yTnPOffe80pCCESLNWvWSAAkACzgIGIH4Tu8AOT29vb/iUVavXp1NBZWhcMBaAMOje97IjaQAXgAjANw+z5lKKICoFzQSKMKRwcgITc317Rz5873U1JS3tXpdMujsB4RRYaGhn7r6+v7Zfv27Q0ARgCMQRGVACIfgRgUUeq3bt2akpeX95HJZMpnjCVFchHi8eN2u7urqqpyW1pa7gAYhU9E3Gw2R2oNBiXqGCorK7O3bdvWsHDhwrckSUqI1ALEk4Nz/nROTs4HLperqbu7+z4UXyQiFYFU8RgdDseHaWlpnzPGEiPxw8Tcwu12X7fZbK8AuAdgLBJVkV88dru9ID09vYrEM3/R6XTPORyOPCjXnM3WRDMo1ZWhsbGxwGKxfBnNtgAxNzCZTO8BqAMwOpsIJEExzIaTJ0++kZGRQeKJE5KSkjKhVNpSuBFILdX1FRUVa7Oysr6TZTliJ0jEBAyAFG4EYgAStmzZYrbZbNWSJJHniVPCEZDf9xQWFlbo9fqMCJ8TEUOEmsL8qau2tjY3OTl5M6Wu+CbUCMQAJGzcuNG8YsWK42SaiVAE5O/3lJSU1JPvIYDgU5hasj919uzZfXq9/iVKXfGLJD18oCLYCMQB6MvLy9cuXbp0H6UuQiWYCORPXevWrfsGQCIJKL4JvP4zRSAJvpK9paWlNCEhIYPEQwQynYBU36Ovrq5+fcmSJXtJPMREpkthDIBu06ZN5szMzBOyLIMERExkqgjk7zbv2bOnnHOeQuIhJmMyAfm7zadPn85dsGDBZhIPMRWTpTB/t9lqtR6n1EVMZLoqzF+yFxcX1wshqGQnpiUwAvm7zU1NTft0Oh11m4lJmSoCcQD6Y8eOrTWbzdRtJoKCBXxSt5kIGfVVYy0Aw/nz50u1Wm0GpS4iWNSBB7qampoNixcv3kviIUKBwWeeV61a9TWJhwgVtQoTQ0NDg0lJSdRxJmZkYhUmAxg/ePDgp0KIkcCHhQhiJtThCsLpdLoSExOHV65c+ZoQgrrPxJQwxlBbW3sCvjdTBZRRHcM1NTWOy5cv1zJGg8SI4FCVIgCMCyH69+/f/5XL5bpIIiKCIXA+kAAghBDD3d3df69fv/5lrVabTKmMmAjn/JEUFogMYOzKlSuX7HZ7JZlqYiYmCkidyHn/zJkzP7W1tX3HOQeJiJiKyZ4HEgA8QojBQ4cOfdvQ0JC+bNmyt6nJSKgE81aGDMVU38nPzz8yOjraQ6aamIyZhmwKIcS9wcHBOzk5OW8KIbRkqgnOOerq6iY10YGofmj0woULvzY3N3+h0WjIDxGPMFNeEgC8Qoh/T5069X1XV9cPnPPHcV5EjBDMq82qH3Lu3r27orm5+dlFixZleb3eaJ8bMUcJ5dVmFRmAW5blf44ePVrm9XoHyFQTQGjzgdQmY3t9ff0R8kMEENqIO/9N18bGxlar1brcZrN97PF46M59nBFOCvP/L3xNxsOHD9f09fX9TqY6vglnTrS/ybhjx47PWltb6wwGw/NkquOTcJ2waqq7SktLP3G73dSpjlPCver+JmNnZ2fbgQMHihhjIySi+MBXPMmIwH5hAoBnYGDA6fF4+jIzM18FQLc75jGMMQwPD//lcDjqAIzNdrcef2Vmt9t/BICCgoIqAAa6ez8/4Zzj5s2bP0PZQ9UbqR0LBYCxq1ev9vT29l7Pysp6UavVJkfih4m5A+ccbre7Jz8/v0QIcReAJ5ICkgGM3bp163ZHR0dndnZ2utFoTKU3POYHnHNwzkeKi4sLnE5nB5TNd+VI7pkKKEJy9/f39547d+6SxWJ5kJqamqbRaIwASEgxhiRJYIxBo9FgfHy8p6ioqPDatWt/AHgApYiKyr7xEnwzFhljZqvV+sKuXbvesVgsG4xG4zMkothBkiS4XK6LN27c+LOsrKzZ6/V2Qtn6O2rbfgfC4Js5JEmSyXcYoQiMiA1kIcRdIcSgEKIPwDh85bv6B7OtwqZd3LfQfSFEjxDiNsLvOxFPBoGHPb9HhKPyH1fdgjvw0l6mAAAAAElFTkSuQmCC) no-repeat 0 0;background-size:contain;border:0;font-size:12px;overflow:hidden;display:inline-block}.fn_btns{display:inline-block;line-height:28px;padding:0 20px 0 0;vertical-align:top;height:100%}#J_header .rebtn{width:30px;margin-top:10px;min-width:28px;height:30px;font-size:14px;line-height:120%;color:#212121;text-shadow:0 1px 0 white;background-image:-webkit-linear-gradient(-90deg,#fcfcfc 0,#ededed 100%);background-image:linear-gradient(-90deg,#fcfcfc 0,#ededed 100%);background-image:-ms-linear-gradient(-90deg,#fcfcfc 0,#ededed 100%);background-image:-webkit-gradient(linear,50% 0,50% 100%,color-stop(0,#fcfcfc),color-stop(1,#ededed));-webkit-border-radius:4px;border-radius:4px;border:0;-webkit-box-shadow:0 0 1px rgba(0,0,0,0.8),0px 0 0 rgba(255,255,255,0.65),inset 0 0 0 rgba(255,255,255,0.65);box-shadow:0 0 1px rgba(0,0,0,0.8),0px 0 0 rgba(255,255,255,0.65),inset 0 0 0 rgba(255,255,255,0.65)}#J_header .rebtn div{height:30px;background-repeat:no-repeat;background-size:16px 17px;background-position:center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAiCAYAAAA+stv/AAAFRElEQVRYCa1Xu0trTRDfG4KIiHp8IT5Qj08QFM0HKiqIJoUPBMFoo20uVqJN/BNio1gasFKrlGoVsbKxUNBCfCWIj0pJwDci+s1v75lzz8lbrwOT3bM7u/PbmdnZya/Pz0+RClVXVyt5eXm2wsJCl9VqVYjtxnXv7+9bxOGHh4et6+tr3/n5edg4H6//KxmAmpoatb6+3p2Wlua0WCwKsQDHoo+PDzkMIG9vb77j4+O5s7OzYCxZHosLACeurKx05ebmeiDMirnlMbSsGC0zjz8+Ps6dnJzMxbNITABNTU02ArBEymxkagFmxWiZME6n5U/ZMgC0mNPaPQLw++DgYI+FaX+V+uEoAFBeW1vrp83hZ105FuI7FWJQDALfxOHT01MHQHR3d7sonjzkpi0TAFZO/taVRypWFEW0tLSI0tJSQe6ReEKhkKDAE/v7+yIc/ht7DEQDIEE8Pz/7MjMzXWwZHQB8TgD86enputmNJy4rKxMjIyOCAjKhESjwxObmpqDT6nIMAErB7EbsrwPo6+vz5OTkINqlqY3KBwYGxNDQEG+IqPYRo+UIV6iPawmGb8XOzo5YXl4W2A/E1gAAJoxJAHV1dSqZNRBL+cTEhOjs7MQaBNAs8RY+EhBAuIntALGysmIShVIcjq0iQ5qCLu7JNeVQ/B9xMuVQBhkH8ezR0RG+TWS0LFxhhe+bm5uRZEyCJSUlbPbfNOE1TSb50OLJmZWVJf1tVMpLMfb6+ios5eXlTgo8meGMgqOjo5CdI/6ScixCAkMwo5+MLBkZGXZikxyuGkU7+9w0l8qH3+/3Tk5Oip6eHlFQUBB3CYEUVlVVnff393q0QrqhoQEN/P5dciF2tPgRt7e34vLyUgQCAXk9r66uZBBSQhJWJBG+KtCG6MzOzkY3lYCDXCyC63BF4QYnWUGFJWy2KK+EKfbMwYfdOMOh/w+EXAErVmmMoAIw/T2gvjdmcoe5fpg4aQGUiaQFjNGPTLW2tgakP06UUT1jY2OfTqczhMwLBZaqKljITBQTUc4yS3z9y+FwuOkRcsPldGCFcoS7tbXVbqESS8/T2BYCFRUVSKc/SqTQhWBnhtXz8/PtlqKioihFd3d3oqur68dAdHR0INeoUGpkOqxioVfOa3yhgAZWIMtIH0Wh+8YA7eWGYs38EgT66+vrYdzBvfb2dn1bFiTENgSNPvHNDnxP5pfWxN5Mms4gAPiGh4cFlUc8J5ECIQKlt7fXpU98sYO15Oc/0U77MSHZQSeRD6NhylJebUDKsBXQkvmW+MrIyRR/cHKsxR7MvJSA4Y3AI6cXpSqVz4H5+Xlxc3PDctIqXDiQhfao7pvd3d1NmKJxtYqLi9300NhZMSIf++Abz/zMzIygK4n7H9RLMvrwXFxcuBcWFuQ7DRRYhABlEFo/SO+47+npKfjy8iJLMtpMRcyQIihVI4MNikF4/aanp3HNkejkY2cEgLrOTyBsi4uLgqpXrJGE+IByBoNB9COJFXPLiiGHJ39qagrK8RagYpLlsxEA5JABAUJZXV0VeDaZ2BoMhMe5hVIQWgbAZkdFPT4+DuVQCuX6gxQJAHtIEBQTyvb2tiyxMciETROR8dSQQ8D19/fD51HKMR8LAMYBYgktiomNjQ1xeHhocguEQHzKP19/f9va2sTg4CBXRDgxakv95CwZDwDmERPIAfIek0UE/cmUQFDEGP94QJgqa1lHUIkvGhsbcWIMgxBwYOlzDJgIf8+TsErzS8Qh4q8Q1mBtwv0TWcAElD4i//1EPlbID7iWMDMKj9gnpgkj/Q/RNMlKirb91wAAAABJRU5ErkJggg==)}#J_header section:nth-child(1) a{color:#666;display:inline-block;text-align:center;padding-left:10px;width:62px;height:30px;line-height:30px;text-decoration:none}#J_load span{display:inline-block;width:30px;height:12px;line-height:12px;background:url(http://a.tbcdn.cn/mw/base/styles/component/more/images/loading.gif) 0 0 no-repeat;-webkit-background-size:30px 12px}",i='<div id="J_M_login"><div id="J_header"><section><a href="javascript:window.lib.login.widget.hideLogin()"><div class="back">返回</div></a></section><section><div class="title">淘宝会员登录</div></section><section><div class="fn_btns"><a href="javascript:window.lib.login.widget.reloadIframe()"><div class="rebtn"><div class=" "></div></div></a></div></section></div><div id="J_load" style="position: absolute; text-align: center; top: 80px; left: 50%; height: 40px; width: 160px; margin-left: -80px; "><span></span></div><div id="J_login_frame" style="height: 400px; display: none"><iframe id="J_M_frame" frameborder="0" scrolling="no" width="100%" height="100%"></iframe></div></div>';b.login.widget={init:function(a){if(a=a||{},f=a.hideType||"close",g=a.targetUrl,!d){d=!0;try{var b=location.host,c=b.split("."),j=c.pop(),k=c.pop(),l=c.pop();document.domain=k+"."+j,e="http://login."+l+"."+document.domain+"/login.htm?v=0&ttid=h5@iframe"}catch(m){console.error(m)}$("#J_M_login").length<1&&$("body").append("<style>"+h+"</style>"+i),$("#J_M_frame")[0].onload=function(){$("#J_M_frame").attr("src")&&($("#J_load").css("display","none"),$("#J_login_frame").css("display","block"))}}},reloadIframe:function(){$("#J_M_frame").attr("src",e),$("#J_login_frame").css("display","none"),setTimeout(function(){"none"==$("#J_login_frame").css("display")&&$("#J_load").css("display","block")},300)},hideLogin:function(a){$("body div").eq(0).css("visibility","visible"),$("#J_M_login").animate({translateY:"100%"},300,"ease-in",function(){$("#J_M_login").css("display","none"),$("#J_load").css("display","none"),$("#J_M_login").css("-webkit-transform",""),a?"reload"===f?window.location.reload():"changeHash"===f&&g?window.location.hash=g:"redirect"===f&&g?window.location.href=g:f&&f.succ&&f.succ.call():f&&f.fail&&f.fail.call()})},showLogin:function(a){this.init(a),$("#J_M_frame").attr("src",e),$("#J_M_login").css("-webkit-transform","translateY(100%)"),$("#J_M_login").css("display","block"),setTimeout(function(){"none"==$("#J_login_frame").css("display")&&$("#J_load").css("display","block")},1e3),setTimeout(function(){$("#J_M_login").animate({translateY:"0"},400,"ease-out",function(){"block"==$("#J_M_login").css("display")&&$("body div").eq(0).css("visibility","hidden"),$("#J_M_login").css(c?{height:"100%"}:{height:"101%"}),c=!c,$("#J_M_login").css("-webkit-transform","")})},100)}},window.H5_M=window.H5_M||{},window.H5_M.Login={hideLogin:b.login.widget.hideLogin}}(window,window.lib||(window.lib={})),function(a,b,c){function d(a){this.config=a,this.interval=c.ui.appinterval,this.indexpage=void 0,this.state_history=void 0,this.uname="_ddid"}var e=b.document,f=b.bridge,g=e.body,h=b.History;d.prototype={init:function(){var d=this;d.st=0,d.swipeid=void 0,d.swipe_page=void 0,d.state_history=d.state_now=c.lib.getUriParam(location.href,this.uname),d.appMod=void 0,d.isInit=!1,a("#J_page").on(c.event.click,".J_swipe_page",function(){a(this).attr("data-swipeid")!=d.state_now&&d._swipeClick(this)});var e=h.getState();h.log("initial:",e.data,e.title,e.url),this._initPage("onload"),h.Adapter.bind(b,"statechange",function(){var a=h.getState();h.log("statechange:",a.data,a.title,a.url),g.addEventListener("click",c.lib.preventAllClick,!0),d._stateListener()}),d._backListener()},_backListener:function(){var a,b=this;e.addEventListener("back",function(d){d.preventDefault();var e=h.getState(),g=e.url;a&&clearTimeout(a),a=setTimeout(function(){try{if(b.modInView){var a=b.modInView.wrap.find(".hd_back, .bottom_back, #J_search_cancl");"J_close_webview"==a[0].id||c.lib.getUriParam(g,"close")?f.push("closeWebview"):(c.navi.back=!0,c.lib.ddState({back:{ddid:a.data("alt"),multi:a.data("multi")}}))}else f.push("closeWebview")}catch(d){f.push("closeWebview")}},50)},!1)},_swipeClick:function(b){{var d=this;d.config.dataPage}d.swipeid=a(b).attr("data-swipeid");var e=a(b).data("role"),f=a(b).data("alt"),g=a(b).data("multi");return"back"==e?(c.navi.back=!0,void c.lib.ddState({back:{ddid:f,multi:g}})):(d.referer=a(b).data("referer"),d.forward=a(b).attr("data-forward"),void c.lib.ddState({push:{ddid:d.swipeid,obj:{referer:a(b).data("referer")}}}))},_initPage:function(b){var d=this,e=h.getState(),g=c.lib.getUriParam(e.url,this.uname)||"index",i=g.split("/")[0];c.navi.alias[i]&&(g=g.replace(i,c.navi.alias[i]));var j=g.split("/"),k=j[0],l=j.slice(1);this.config.dataPage[k]||(k=this.config.defaultPage);var m=a("#J_"+k),n=d.appMod=this.config.dataPage[k];if("onload"==b){m.removeClass("hide");var o=c.crumbs.length;o&&c.crumbs[o-1]===g||(c.crumbs=[g],c.lib.localStorage.set("crumbs",c.crumbs))}if(n._view=n._view||n.view(),setTimeout(function(){n._view.init.apply(n._view,l)},0),d._bindEvents(),m.attr("data-ddid",j[0]?j.join("/"):this.config.defaultPage),d.modInView=n._view,"onload"==b){var p=c.lib.getUriParam(h.getState().url,"close");if(p&&(d.modInView.hideBack=!0,d.modInView._iScrollInit||d.modInView._scrollInit)){var q=d.modInView._iScrollInit||d.modInView._scrollInit;d.modInView._iScrollInit=d.modInView._scrollInit=function(){q.apply(d.modInView,arguments),d.modInView.hideBack&&d.modInView.wrap.find(".hd_back").hide()}}m.removeClass("xr"),d.modInView.setBeforePageIn&&d.modInView.setBeforePageIn(g),setTimeout(function(){d.modInView.setAfterPageIn&&d.modInView.setAfterPageIn(g)},0)}if(c._hideTitleBar&&!d.isInit){d.isInit=!0;try{f.push(d.modInView.menuEvent?"showOptionMenu":"hideOptionMenu")}catch(r){console.log(r)}}},_bindEvents:function(){var b=this,d=b.appMod._view,e=d.wrap,f=d.menuEvent,g=d.events;if(g&&a.each(g,function(a,b){d[b[2]]&&(b[2]=d[b[2]]);var c=b[0]+"."+a,f=b[1];e.off(c).on(c,f,function(a){b[2].apply(d,[a,this])})}),f){var i=h.getState().url,j=i&&c.lib.getUriParam(i,"ddid");j=j||"index",c._menuHandler=c._menuHandler||{},c._menuHandler[j]={context:d,handler:f}}},_stateListener:function(){var b=this,d=b.config.defaultPage,e=h.getState(),f=e.url,g=c.lib.getUriParam(f,b.uname),i=b.state_now=g?g:d,j=i.split("/")[0],k=b.config.dataPage[j],l=b.state_history=b.state_history?c.navi.alias[b.state_history]||b.state_history:d,m=l.split("/")[0],n=b.config.dataPage[m];if(l!==i){if(!k||!n)return console.log("hash error"),void location.reload();b.showhash=j,b.outhash=m,b._state_now=i,b._state_history=l,b.pagein=a("#J_"+b.showhash),b.pageout=a("#J_"+b.outhash),b.modInView=b.config.dataPage[b.showhash]._view,b.modOutView=b.config.dataPage[b.outhash]._view,c.navi.back||(c.crumbs.push(i),c.lib.localStorage.set("crumbs",c.crumbs)),c.navi.hand?c.navi.hand=!1:(c.crumbs=[i],c.lib.localStorage.set("crumbs",c.crumbs)),c.navi.forward?(b._swipePrepare("in"),c.navi.forward=!1):c.navi.back?(b._swipePrepare("out"),c.navi.back=!1):b._swipePrepare(b.pagein.hasClass("xr")?"in":b.pagein.index()<b.pageout.index()?"out":"in"),this.state_history=i}else b._removeListener()},_swipePrepare:function(a){var d=this;switch(d.selfpage=this.pagein[0].id==this.pageout[0].id?!0:!1,("in"==a||this.pagein.data("ddid")!==this.state_now)&&this._initPage(),a){case"out":c.device.iosStyle||b.scrollTo(0,0),d._swipeOut();break;case"in":c.device.iosStyle||(d.modOutView.scroll_top&&(d.modOutView.scroll_top=e.body.scrollTop),b.scrollTo(0,0)),d._swipeIn();break;default:d._swipeIn()}},_swipeIn:function(){var a=this,b=a.pagein,d=a.pageout,e=(a.interval,[a._state_now,a._state_history]);a.modOutView.setBeforePageOut&&a.modOutView.setBeforePageOut(e[0],e[1]),a.modInView.setBeforePageIn&&a.modInView.setBeforePageIn(e[0],e[1]),d.removeClass("xc"),b.attr("data-flashin","true"),a.showhash!==a.outhash&&d.addClass("hide"),b.removeClass("xr hide"),setTimeout(function(){if(a.modOutView.setAfterPageOut&&a.modOutView.setAfterPageOut(e[0],e[1]),a._callAfterIn(),a.modInView.setAfterPageIn&&a.modInView.setAfterPageIn(e[0],e[1]),c._hideTitleBar)try{a.modInView.wrap.find(".hd_title").find("h2")&&!a.modInView._titleLazy&&f.push("setTitle",{title:a.modInView.wrap.find(".hd_title").find("h2").html()||"淘点点"}),f.push(a.modInView.menuEvent?"showOptionMenu":"hideOptionMenu")}catch(b){console.log(b)}},50)},_swipeOut:function(){var a=this,b=a.pagein,d=a.pageout,e=[a._state_now,a._state_history];a.modOutView.setBeforePageOut&&a.modOutView.setBeforePageOut(e[0],e[1]),a.modInView.setBeforePageIn&&a.modInView.setBeforePageIn(e[0],e[1]),d.removeClass("xc"),b.attr("data-flashin","true"),d.addClass("hide"),b.removeClass("hide"),setTimeout(function(){if(a.modOutView.setAfterPageOut&&a.modOutView.setAfterPageOut(e[0],e[1]),a._callAfterOut(),a.modInView.setAfterPageIn&&a.modInView.setAfterPageIn(e[0],e[1]),c._hideTitleBar)try{a.modInView.wrap.find(".hd_title").find("h2")&&!a.modInView._titleLazy&&f.push("setTitle",{title:a.modInView.wrap.find(".hd_title").find("h2").html()||"淘点点"}),f.push(a.modInView.menuEvent?"showOptionMenu":"hideOptionMenu")}catch(b){console.log(b)}},0)},_callAfterIn:function(){var a=this;a.modInView.mainScroll&&(a.modInView.mainScroll.enable()||a.modInView.mainScroll.refresh()),a.modOutView.mainScroll&&a.modOutView.mainScroll.disable(),a.modInView._scroll&&(a.modInView._scroll.enable()||a.modInView._scroll.refresh()),a.modOutView._scroll&&a.modOutView._scroll.disable(),a._removeListener()},_callAfterOut:function(){var a=this;a.modInView.mainScroll&&(a.modInView.mainScroll.enable()||a.modInView.mainScroll.refresh()),a.modOutView.mainScroll&&a.modOutView.mainScroll.disable(),a.modInView._scroll&&(a.modInView._scroll.enable()||a.modInView._scroll.refresh()),a.modOutView._scroll&&a.modOutView._scroll.disable(),c.device.iosStyle||a.modInView.scroll_top&&(e.body.scrollTop=a.modInView.scroll_top,a.modInView.scroll_top=0),a._removeListener()},_removeListener:function(){setTimeout(function(){g.removeEventListener("click",c.lib.preventAllClick,!0)},100),document.removeEventListener("touchmove",c.event.stoptouchmoveHandler,!1)}},c.StatePage=function(a){return new d(a)}}(Zepto,window,window.dd),(window.jQuery||window.Zepto)&&!function(a){a.fn.Swipe=function(b){return this.each(function(){a(this).data("Swipe",new Swipe(a(this)[0],b))})}}(window.jQuery||window.Zepto);